# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —Å Swiss Ephemeris

## –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã:

1. **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è** (`index.js`) - –±—ã—Å—Ç—Ä—ã–µ —Ä–∞—Å—á–µ—Ç—ã –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
2. **–ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è** (`index-with-swiss.js`) - —Ç–æ—á–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã —Å Swiss Ephemeris

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Swiss Ephemeris

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install
```

Swiss Ephemeris —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

Swiss Ephemeris —Ç—Ä–µ–±—É–µ—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

#### macOS
```bash
xcode-select --install
```

#### Ubuntu/Debian
```bash
sudo apt-get update
sudo apt-get install build-essential node-gyp python3
```

#### Fedora/RHEL
```bash
sudo dnf groupinstall "Development Tools"
sudo dnf install node-gyp python3
```

#### Windows
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [Visual Studio Build Tools](https://visualstudio.microsoft.com/downloads/) –∏–ª–∏ [Visual Studio Community](https://visualstudio.microsoft.com/vs/community/).

## –ó–∞–ø—É—Å–∫

### –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

```bash
npm start
# –∏–ª–∏
npm run dev
```

### –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å Swiss Ephemeris

```bash
npm run start:full
# –∏–ª–∏
npm run dev:full
```

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è | –ü–æ–ª–Ω–∞—è (Swiss Ephemeris) |
|----------|-----------|-------------------------|
| –°–∫–æ—Ä–æ—Å—Ç—å | ‚ö° –ë—ã—Å—Ç—Ä–æ | ‚ö°‚ö° –°—Ä–µ–¥–Ω–µ |
| –¢–æ—á–Ω–æ—Å—Ç—å | ~50% | üéØ 100% |
| –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | –¢–æ–ª—å–∫–æ SDK | SDK + Swiss Ephemeris |
| –†–∞—Å—á–µ—Ç –ø–ª–∞–Ω–µ—Ç | –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ | –†–µ–∞–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ |
| –í–æ—Ä–æ—Ç–∞ | –ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ | –¢–æ—á–Ω—ã–µ |
| –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production | ‚ùå –î–µ–º–æ | ‚úÖ –î–∞ |

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ß–µ—Ä–µ–∑ MCP

```bash
# –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
echo '{"jsonrpc":"2.0","id":1,"method":"tools/call","params":{"name":"calculate_human_design","arguments":{"birthDate":"1990-05-15","birthTime":"14:30","birthLocation":"–ú–æ—Å–∫–≤–∞"}}}' | npm start

# –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è
echo '{"jsonrpc":"2.0","id":1,"method":"tools/call","params":{"name":"calculate_human_design","arguments":{"birthDate":"1990-05-15","birthTime":"14:30","birthLocation":"–ú–æ—Å–∫–≤–∞"}}}' | npm run start:full
```

### –ß–µ—Ä–µ–∑ –ø—Ä—è–º—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

#### –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
```javascript
import { calculateHumanDesignSimple } from './src/simple-calculations.js';

const result = await calculateHumanDesignSimple({
  birthDate: '1990-05-15',
  birthTime: '14:30',
  birthLocation: '–ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è'
});
```

#### –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è
```javascript
const { calculateHumanDesign } = require('./src/calculations-cjs.cjs');

const result = await calculateHumanDesign({
  birthDate: '1990-05-15',
  birthTime: '14:30',
  birthLocation: '–ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è',
  latitude: 55.7558,
  longitude: 37.6173
});
```

## –†–∞–∑–Ω–∏—Ü–∞ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

### –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è

```json
{
  "gates": [
    {
      "planet": "Sun",
      "gate": 19,
      "line": 2,
      "name": "Approach"
    }
  ],
  "calculationNote": "–≠—Ç–æ –¥–µ–º–æ-—Ä–∞—Å—á–µ—Ç. –î–ª—è —Ç–æ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—É—é –≤–µ—Ä—Å–∏—é MCP —Å–µ—Ä–≤–µ—Ä–∞."
}
```

### –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è

```json
{
  "gates": [
    {
      "planet": "Sun",
      "gate": 19,
      "line": 2,
      "name": "Approach",
      "ru_name": "–ü–æ–¥—Ö–æ–¥",
      "sign": 1,
      "hexagram": 19,
      "longitude": 19.45
    }
  ],
  "calculationSource": "Swiss Ephemeris",
  "version": "1.0.0-full"
}
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å n8n

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä—è–º–æ –≤ Code Node

```javascript
// –í n8n Code Node
const { calculateHumanDesign } = require('/path/to/human_design/src/calculations-cjs.cjs');

const result = await calculateHumanDesign({
  birthDate: $input.item.json.birthDate,
  birthTime: $input.item.json.birthTime,
  birthLocation: $input.item.json.birthLocation,
});

return { json: result };
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: HTTP API

–°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:

```javascript
// api-server.js
const express = require('express');
const { calculateHumanDesign } = require('./src/calculations-cjs.cjs');

const app = express();
app.use(express.json());

app.post('/api/human-design', async (req, res) => {
  try {
    const result = await calculateHumanDesign(req.body);
    res.json({ success: true, data: result });
  } catch (error) {
    res.status(500).json({ success: false, error: error.message });
  }
});

app.listen(3000, () => {
  console.log('API server running on http://localhost:3000');
});
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
node api-server.js
```

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: Cannot find module 'swisseph'

```bash
npm install swisseph
# –∏–ª–∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
rm -rf node_modules package-lock.json
npm install
```

### –û—à–∏–±–∫–∞: node-gyp rebuild failed

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ build tools –¥–ª—è –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã (—Å–º. —Ä–∞–∑–¥–µ–ª "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏").

### –û—à–∏–±–∫–∞: swisseph.node is not a valid Win32 application

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º–æ–¥—É–ª—å —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –¥–ª—è –¥—Ä—É–≥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:

```bash
npm rebuild swisseph
```

### –û—à–∏–±–∫–∞ –≤ n8n: require is not defined

–î–ª—è n8n –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ dynamic import:

```javascript
const swissephModule = await import('/path/to/human_design/src/calculations-cjs.cjs');
const { calculateHumanDesign } = swissephModule.default || swissephModule;
```

–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –≤ n8n.

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è**: ~10ms –Ω–∞ —Ä–∞—Å—á–µ—Ç
- **–ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è**: ~50-100ms –Ω–∞ —Ä–∞—Å—á–µ—Ç

–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤ —ç—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º–æ.

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏/–¥–µ–º–æ**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
- **–î–ª—è production**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—É—é –≤–µ—Ä—Å–∏—é
- **–î–ª—è n8n**: –µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å Swiss Ephemeris, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
- **–î–ª—è Docker**: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ build tools –≤ –æ–±—Ä–∞–∑–µ

## Docker –ø—Ä–∏–º–µ—Ä

```dockerfile
FROM node:18

WORKDIR /app

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ build tools
RUN apt-get update && apt-get install -y build-essential python3

COPY package*.json ./
RUN npm install

COPY . .

CMD ["npm", "run", "start:full"]
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [Swiss Ephemeris –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://www.astro.com/swisseph/swephinfo_e.htm)
- [Swiss Ephemeris npm package](https://www.npmjs.com/package/swisseph)
- [Human Design System](https://www.humandesign.me/)

